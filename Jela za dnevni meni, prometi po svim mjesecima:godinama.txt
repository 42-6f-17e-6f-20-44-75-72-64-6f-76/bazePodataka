-> vlasnik restorana zeli dobiti prioritetna jela za dnevni meni obzirom na datum isteka roka namirnica 

SELECT * FROM (
SELECT DISTINCT ON(distinct_datum.prioritetna_jela) * FROM (
SELECT jelo.naziv AS prioritetna_jela, namirnice.naziv AS namirnica_u_pripravi, namirnice. rok_trajanja from jelo
JOIN JeloNamirnice ON jelo.id = JeloNamirnice.id_jelo
JOIN namirnice ON namirnice.id = JeloNamirnice.id_namirnice
WHERE namirnice.rok_trajanja BETWEEN now()::date AND now()::date+50 
ORDER BY (namirnice.rok_trajanja)
)distinct_datum
)distinct_jela
ORDER BY (distinct_jela.rok_trajanja);




-> vlasnik restorana zeli dobiti promet po svim mjesecima
 
Select date_part('month', racun.datum) as mjesec,  sum(jelo.cijena*jeloracun.kolicina) as promet from jelo
Join jeloracun on jelo.id= jeloracun.id_jelo
Join racun on racun.id= jeloracun.id_racun
GROUP BY date_part('month', racun.datum);

// Za provjeru prometa po mjesecima:

INSERT INTO Racun (id, datum)
VALUES
(5, now()::date-52);

INSERT INTO jeloracun
VALUES
(1, 5, 1),
(3, 5, 2);




-> vlasnik restorana zeli dobiti promet po svim godinama

Select date_part('year', racun.datum) as godina,  sum(jelo.cijena* jeloracun.kolicina) as promet from jelo
Join jeloracun on jelo.id= jeloracun.id_jelo
Join racun on racun.id= jeloracun.id_racun
GROUP BY date_part('year', racun.datum);
